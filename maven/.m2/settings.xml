<settings xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
	<mirrors>
		<mirror>
			<id>maven-default-http-blocker</id>
			<mirrorOf>dummy</mirrorOf>
			<name>Dummy mirror to override default blocking mirror that blocks HTTP</name>
			<url>http://0.0.0.0/</url>
			<blocked>false</blocked>
		</mirror>
	</mirrors>

	{{ if and .gradle .gradle.repositories -}}
	<servers>
		{{- range .gradle.repositories }}
		{{- if .credentials }}
		<server>
			<id>{{ .name }}</id>
			{{- if eq .credentials.type "basic" }}
			<username>{{ .credentials.username }}</username>
			<password>{{ .credentials.password }}</password>
			{{- else if eq .credentials.type "header" }}
			<configuration>
				<httpHeaders>
					<property>
						<name>{{ .credentials.name }}</name>
						<value>{{ .credentials.value }}</value>
					</property>
				</httpHeaders>
			</configuration>
			{{- end }}
		</server>
		{{- end }}
		{{- end }}
	</servers>

	<profiles>
		<profile>
			<id>repositories</id>
			{{- if .keyStore }}
			<properties>
				<javax.net.ssl.keyStore>{{ .keyStore.path }}</javax.net.ssl.keyStore>
				<javax.net.ssl.keyStoreType>pkcs12</javax.net.ssl.keyStoreType>
				<javax.net.ssl.keyStorePassword>{{ html .keyStore.password }}</javax.net.ssl.keyStorePassword>
			</properties>
			{{- end }}

			<repositories>
				{{- range .gradle.repositories }}
				<repository>
					<id>{{ .name }}</id>
					<url>{{ .url }}</url>
				</repository>
				{{- end }}
				<repository>
					<id>central</id>
					<url>https://repo.maven.apache.org/maven2/</url>
				</repository>
			</repositories>

			<pluginRepositories>
				{{- range .gradle.repositories }}
				<pluginRepository>
					<id>{{ .name }}</id>
					<url>{{ .url }}</url>
				</pluginRepository>
				{{- end }}
				<pluginRepository>
					<id>central</id>
					<url>https://repo.maven.apache.org/maven2/</url>
				</pluginRepository>
			</pluginRepositories>
		</profile>
	</profiles>

	<activeProfiles>
		<activeProfile>repositories</activeProfile>
	</activeProfiles>
	{{- end }}
</settings>
