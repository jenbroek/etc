initscript {
	repositories {
		maven {
			url 'https://plugins.gradle.org/m2/'
		}
	}
	dependencies {
		classpath 'org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:3.3'
	}
}

allprojects {
	repositories {
		mavenLocal()
		{{- if and .gradle .gradle.repositories }}
		{{- range .gradle.repositories }}
		{{ .type }} {
			name = '{{ .name }}'
			url = '{{ .url }}'
			{{- if .credentials }}
			{{- if eq .credentials.type "basic" }}
			credentials {
				username = '{{ .credentials.username }}'
				password = '{{ .credentials.password }}'
			}
			{{- else if eq .credentials.type "header" }}
			credentials(HttpHeaderCredentials) {
				name = '{{ .credentials.name }}'
				value = '{{ .credentials.value }}'
			}
			authentication {
				header(HttpHeaderAuthentication)
			}
			{{- end }}
			{{- end }}
		}
		{{- end }}
		{{- end }}
		mavenCentral()
		jcenter()
	}

	afterEvaluate { project ->
		project.apply plugin: org.sonarqube.gradle.SonarQubePlugin
	}
}
